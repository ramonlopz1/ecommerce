const bodyParser=require("body-parser"),express=require("express"),app=express(),multer=require("multer");app.use(express.static("../public")),app.use(bodyParser.urlencoded({extended:!0})),app.use(bodyParser.json());const sequence={_id:0,get id(){return this._id++}},storage=multer.diskStorage({destination:function(e,r,s){s(null,"./assets/upload")},filename:function(e,r,s){s(null,`${sequence.id}_${r.originalname}`)}}),upload=multer({storage}).single("produtoimginput");app.post("/upload",((e,r)=>{upload(e,r,(e=>{if(e)return r.end("Ocorreu um erro");r.end("Concluindo com sucesso.")}))})),app.listen(3003,(()=>{console.log("Executando servidor...")}));